<html>
    <head>
        {% load static %}
        <link rel="stylesheet" href="{% static 'smart_playlist/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'smart_playlist/main.css' %}">
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

        <!-- <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
         rel = "stylesheet"> -->
         <link href="https://code.jquery.com/ui/1.12.1/themes/black-tie/jquery-ui.css" rel="stylesheet">

        <script type="text/javascript" src="http://tracking.musixmatch.com/t1.0/AMa6hJCIEzn1v8RuOP"></script>
        <title>
            {% if query %}
                {{ query.0 }}
            {% else %}
                Smart Playlist
            {% endif %}
        </title>
    </head>
    
    <body>
        <form action='' class="form-inline global-search" method='GET'>
            <h1 style="font-size: 55px; font-family:Futura,serif; color: #1DB954">
                Smart Playlist Generator
            </h1>
            
            <br><br>

            <div class="form-group ui-widget">
                <input id="song" type="text" name="song" class="form-control ui-autocomplete-input"
                       {% if query %}value="{{ query.0 }}"{% endif %} placeholder="Song Name" autocomplete="off">
                <input id="artist" type="text" name="artist" class="form-control ui-widget"
                       {% if query %}value="{{ query.1 }}"{% endif %} placeholder="Artist Name">
                <br>
                <input id="input" type="radio" name="version" value=1 class="form-control ui-widget"> version1
                <input id="input" type="radio" name="version" value=2 class="form-control ui-widget"> version2
                <input id="input" type="radio" name="version" value=3 checked class="form-control ui-widget"> version3
                <br>
                <label>
                    Lyrics
                    <input name="alpha" id="input" type="range" min="0" max="200" value="100" class="form-control"
                           onchange="showValue('lyric_weight', this.value)"/>
                </label>
                <span id="lyric_weight">100</span>
                <br>
                <label>
                    Audio Features
                    <input name="beta" id="input" type="range" min="0" max="200" value="100" class="form-control"
                           onchange="showValue('audio_weight', this.value)"/>
                </label>
                <span id="audio_weight">100</span>
                <br>
                <label>
                    Playlist Similarity
                    <input name="gamma" id="input" type="range" min="0" max="200" value="100" class="form-control"
                           onchange="showValue('playlist_weight', this.value)"/>
                </label>
                <span id="playlist_weight">100</span>

                <script type="text/javascript">
                    function showValue(id, newValue) {
                        document.getElementById(id).innerHTML = String(newValue)
                    }
                </script>
            </div>
            <br>

            <!-- https://simpleisbetterthancomplex.com/tutorial/2016/08/29/how-to-work-with-ajax-request-with-django.html -->
            <!-- http://jqueryui.com/autocomplete/#remote-jsonp -->
            
            <button type="submit" class="btn btn-info"> Go! </button>
        </form>
        
        {% if songs %}
        <div class="global-search">You searched for: {{ query }}</div>
        <div class="form-inline global-search">
            <table id="results">
                <thead>
                    <tr>
                        <th>Preview</th>
                        <th>Song</th>
                        <th>Lyric Score</th>
                        <th>Cluster Score</th>
                        <th>Playlist Score</th>
                        <th>Total Score</th>
                    </tr>
                </thead>
                <tbody>
                {% for song in songs %}
                    <tr>    
                        <td><audio class="js-music music-player-item" src="{{ song.preview }}" controls></audio></td>
                        <td>{{ song.song }}</td>
                        <td>{{ song.lyric }}</td>
                        <td>{{ song.cluster }}</td>
                        <td>{{ song.playlist }}</td>
                        <td>{{ song.total }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}

        <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous">
        </script>
        <script
            src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
            integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
            crossorigin="anonymous">    
        </script>
        <script type="text/javascript" src="{% static 'smart_playlist/main.js' %}"></script>
    </body>
</html>